<div class="qor-page__body">
  <div class="qor-section">
    <div class="qor-section__header">
      <h4 class="qor-section-title">{{t "Latest Orders"}}</h4>
    </div>
    <div class="qor-section__body qor-table-container">
      {{(new_resource_context "Order").Render "index/table" latest_orders}}
    </div>
  </div>

  <div class="qor-section">
    <div class="qor-section__header">
      <h4 class="qor-section-title">{{t "Reports"}}</h4>
    </div>

    <div class="qor-section__body mdl-grid">
      <div class="mdl-cell mdl-cell--2-col">
        <input class="mdl-textfield__input" id="startDate" type="text" data-toggle="qor.datepicker" >
      </div>
      <div class="mdl-cell mdl-cell--1-col" style="text-align:center;">
        -
      </div>
      <div class="mdl-cell mdl-cell--2-col">
        <input class="mdl-textfield__input" id="endDate" type="text" data-toggle="qor.datepicker" >
      </div>
      <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-button--save j-update-record" > {{t "Update Report"}} </button>
    </div>

    <div class="qor-section__body mdl-grid">
      <div class="mdl-cell mdl-cell--6-col">
        <canvas id="orders_report"></canvas>
      </div>

      <div class="mdl-cell mdl-cell--6-col">
        <canvas id="users_report"></canvas>
      </div>
    </div>
  </div>

  <script src="/javascripts/Chart.min.js"></script>
  <script>
    $(document).ready(function(){
        var today = new Date();
        var defStartDate = today.AddDate(-6);
        $("#startDate").val(defStartDate.Format("yyyy-MM-dd"));
        $("#endDate").val(today.Format("yyyy-MM-dd"));
        $(".j-update-record").click(function(){
            $.getJSON("/admin/reports",{startDate:$("#startDate").val(), endDate:$("#endDate").val()},function(jsonData){
                RenderChart(jsonData.Orders,jsonData.Users);
            });
        });
        $(".j-update-record").click();
    });
  </script>
</div>
