<div class="qor-page__body">
  <div class="qor-section">
    <div class="qor-section__header">
      <h4 class="qor-section-title">{{t "Latest Orders"}}</h4>
    </div>
    <div class="qor-section__body qor-table-container">
      {{(new_resource_context "Order").Render "index/table" latest_orders}}
    </div>
  </div>

  <div class="qor-section">
    <div class="qor-section__header">
      <h4 class="qor-section-title">{{t "Reports"}}</h4>
    </div>

    <div class="qor-section__body mdl-grid">
      <div class="mdl-cell mdl-cell--2-col">
        <input class="mdl-textfield__input" type="text" data-toggle="qor.datepicker" value="2015-01-01">
      </div>
      <div class="mdl-cell mdl-cell--1-col" style="text-align:center;">
        -
      </div>
      <div class="mdl-cell mdl-cell--2-col">
        <input class="mdl-textfield__input" type="text" data-toggle="qor.datepicker" value="2015-01-01">
      </div>
      <button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-button--save" type="submit"> {{t "Update Report"}} </button>
    </div>

    <div class="qor-section__body mdl-grid">
      <div class="mdl-cell mdl-cell--6-col">
        <canvas id="orders_report"></canvas>
      </div>

      <div class="mdl-cell mdl-cell--6-col">
        <canvas id="users_report"></canvas>
      </div>
    </div>
  </div>

  <script src="/javascripts/Chart.min.js"></script>
  <script>
    var ordersData = {{last_week_orders}}
    var orderDateLables = [];
    var orderCounts = [];
    for (var i = 0; i < ordersData.length; i++) {
        orderDateLables.push(ordersData[i].Date.substring(5,10));
        orderCounts.push(ordersData[i].Total)
    }
    var orders_data = {
      labels: orderDateLables,
      datasets: [
      {
        label: "Orders Report",
        fillColor: "rgba(151,187,205,0.2)",
        strokeColor: "rgba(151,187,205,1)",
        pointColor: "rgba(151,187,205,1)",
        pointStrokeColor: "#fff",
        pointHighlightFill: "#fff",
        pointHighlightStroke: "rgba(151,187,205,1)",
        data: orderCounts
      }
      ]
    };
    var usersData = {{last_week_users}}
    var usersDateLables = [];
    var usersCounts = [];
    for (var i = 0; i < usersData.length; i++) {
        usersDateLables.push(usersData[i].Date.substring(5,10));
        usersCounts.push(usersData[i].Total)
    }
    var users_data = {
      labels: usersDateLables,
      datasets: [
      {
        label: "Users Report",
        fillColor: "rgba(151,187,205,0.2)",
        strokeColor: "rgba(151,187,205,1)",
        pointColor: "rgba(151,187,205,1)",
        pointStrokeColor: "#fff",
        pointHighlightFill: "#fff",
        pointHighlightStroke: "rgba(151,187,205,1)",
        data: usersCounts
      }
      ]
    };

    Chart.defaults.global.responsive = true;

    var orders_context = document.getElementById("orders_report").getContext("2d");
    new Chart(orders_context).Line(orders_data, "");

    var users_context = document.getElementById("users_report").getContext("2d");
    new Chart(users_context).Bar(users_data, "");
  </script>
</div>
